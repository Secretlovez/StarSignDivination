import{r as v,o as O,d as i,a as R,c as _,b as a,n as g,u as l,e as h,t as d,w as b,F as Y,f as M,g as I,v as T,h as q,p as H,i as P,j as $,E as Q,k as c,l as A,m as G,q as J}from"./index-XpEztBOB.js";function K(F,f="key",m="value"){return F.reduce((p,n)=>(p[n[f]]=n[m],p),{})}const W={class:"main-body__wrapper"},X={class:"main-body__header"},Z={class:"main-body__header-left"},aa={class:"avatar"},ea={class:"desc"},oa={class:"desc-name"},ta={class:"desc-date"},sa={class:"main-body__header-right"},na={class:"main-body__content"},la=["onClick"],da={class:"star-date"},ca={class:"main-body__summary"},ra=["loading"],ia={class:"star-desc__label"},ua={class:"star-desc__value"},va={key:1},_a={class:"main-body__desc"},ma={class:"star-content__des"},ya={class:"star-content__value"},ka={class:"select-model"},ha={class:"select-model__body"},fa=["onClick"],pa={class:"nav-item__title"},ga={class:"nav-item__date"},ba={class:"select-model__footer"},Ya=q({name:"HomePage"}),Da=Object.assign(Ya,{setup(F){const f=[{key:"today",value:"今日"},{key:"tomorrow",value:"明日"},{key:"week",value:"本周"},{key:"month",value:"本月"},{key:"year",value:"本年"},{key:"romance",value:"爱情"}],m=v("today"),p=t=>{switch(t){case"today":n.value=i().format("YYYY-MM-DD");break;case"tomorrow":n.value=i().add(1,"day").format("YYYY-MM-DD");break;case"week":{const o=i().startOf("week").format("YYYY-MM-DD"),s=i().endOf("week").format("YYYY-MM-DD");n.value=`${o}~${s}`}break;case"month":n.value=i().format("YYYY-MM");break;case"year":n.value=i().format("YYYY");break;case"romance":n.value=i().format("YYYY-MM-DD");break}m.value=t,C(),w()},n=v(""),D=v([{name:"综合运势",value:"",loading:!0},{name:"爱情运势",value:"",loading:!0},{name:"事业学业",value:"",loading:!0},{name:"财富运势",value:"",loading:!0},{name:"爱情运势",value:"",loading:!0},{name:"健康指数",value:"",loading:!0},{name:"幸运颜色",value:"",loading:!0},{name:"幸运数字",value:"",loading:!0},{name:"速配星座",value:"",loading:!0}]),x=[{astroid:"1",astroname:"白羊座",icon:"baiyangzuo",date:"3-21~4-19"},{astroid:"2",icon:"jinniuzuo",astroname:"金牛座",date:"4-20~5-20"},{astroid:"3",icon:"shuangzizuo",astroname:"双子座",date:"5-21~6-21"},{astroid:"4",icon:"juxiezuo",astroname:"巨蟹座",date:"6-22~7-22"},{astroid:"5",icon:"shizizuo",astroname:"狮子座",date:"7-23~8-22"},{astroid:"6",icon:"chunvzuo",astroname:"处女座",date:"8-23~9-22"},{astroid:"7",icon:"tianchengzuo",astroname:"天秤座",date:"9-23~10-23"},{astroid:"8",icon:"tianxiezuo",astroname:"天蝎座",date:"10-24~11-22"},{astroid:"9",icon:"sheshouzuo",astroname:"射手座",date:"11-23~12-21"},{astroid:"10",icon:"mojiezuo",astroname:"摩羯座",date:"12-22~1-19"},{astroid:"11",icon:"shuipingzuo",astroname:"水瓶座",date:"1-20~2-18"},{astroid:"12",icon:"shuangyuzuo",astroname:"双鱼座",date:"2-19~3-20"}],u=v(x[0]),y=v(!1),B=t=>{u.value=t,C(),w(),setTimeout(()=>{y.value=!1},300)},E=v([{key:"all",label:"综合运势",type:"star",value:0},{key:"work",label:"事业学业",type:"star",value:0},{key:"love",label:"爱情运势",type:"star",value:0},{key:"money",label:"财富运势",type:"star",value:0},{key:"health",label:"健康指数",value:""},{key:"number",label:"幸运数字",value:""},{key:"color",label:"幸运颜色",value:""},{key:"QFriend",label:"速配星座",value:""}]),S=["#99A9BF","#F7BA2A","#FF9900"],k=v(!1),U=K(f),w=async()=>{k.value=!0,D.value.forEach(o=>{o.loading=!0});const t=U[m.value];H("/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-tiny-8k?access_token=24.72e51227ded9c1e3b79f94bd99e02417.2592000.1731740058.282335-115902331",{messages:[{role:"user",content:`${u.value.astroname}${t}运势`}],temperature:.95,top_p:.7,penalty_score:1},{baseURL:"baiduUrl"}).then(o=>{o!=null&&o.data&&D.value.forEach(s=>{s.type==="star"?s.value=Math.floor(o.data[s.key]/20):s.value=o.data[s.key],s.loading=!1})}).finally(()=>{k.value=!1})},C=async()=>{k.value=!0,P("/constellation/getAll",{consName:u.value.astroname,type:m.value,key:"c28ef3234057424111f5d2b93364806f"},{baseURL:"juheUrl"}).then(t=>{var s;if(console.log("res: ",t),!((s=t==null?void 0:t.res)!=null&&s.data))return;const o=t.res.data;console.log("res?.data: ",t==null?void 0:t.data),E.value.forEach(r=>{r.type==="star"?r.value=Math.floor(o[r.key]/20):r.value=o[r.key],r.loading=!1})}).finally(()=>{k.value=!1})};return O(()=>{C(),w(),n.value=i().format("YYYY-MM-DD")}),R(()=>{}),(t,o)=>{const s=$("MxIcon"),r=$("Sort"),j=Q,N=G,V=J,L=$("CircleClose");return c(),_("div",{id:"home",class:g(`${l(k)?"loading":""}`)},[a("div",W,[a("div",{class:g(`main-body ${l(y)?"loading":""}`)},[a("div",X,[a("div",Z,[a("div",aa,[h(s,{name:l(u).icon},null,8,["name"])]),a("div",ea,[a("div",oa,d(l(u).astroname),1),a("div",ta,d(l(u).date),1)])]),a("div",sa,[a("div",{class:"change",onClick:o[0]||(o[0]=e=>y.value=!0)},[h(j,null,{default:b(()=>[h(r)]),_:1})])])]),a("div",na,[(c(),_(Y,null,M(f,e=>a("div",{key:e.key,class:g(`forecast-btn ${l(m)===e.key?"active":""}`),onClick:z=>p(e.key)},d(e.value),11,la)),64)),a("div",da,[a("div",null,d(l(n)),1)])]),a("div",ca,[(c(!0),_(Y,null,M(l(E),e=>(c(),_("div",{key:e.key,class:"star-desc",rows:5,loading:e.loading,animated:""},[a("div",ia,d(e.label),1),a("div",ua,[e.type==="star"?(c(),A(N,{key:0,modelValue:e.value,"onUpdate:modelValue":z=>e.value=z,colors:S,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(c(),_("div",va,d(e.value),1))])],8,ra))),128))]),a("div",_a,[(c(!0),_(Y,null,M(l(D),e=>(c(),A(V,{key:e.key,class:"star-content",rows:5,loading:e.loading,animated:""},{template:b(()=>o[2]||(o[2]=[])),default:b(()=>[a("div",ma,d(e.key),1),a("div",ya,d(e.value),1)]),_:2},1032,["loading"]))),128))])],2)]),I(a("div",ka,[o[3]||(o[3]=a("div",{class:"select-model__header"},null,-1)),a("div",ha,[(c(),_(Y,null,M(x,e=>a("div",{key:e.astroid,class:g(`nav-item ${l(u).astroid===e.astroid?"active":""}`),onClick:z=>B(e)},[a("div",pa,d(e.astroname),1),a("div",ga,d(e.date),1)],10,fa)),64))]),a("div",ba,[a("div",{class:"close",onClick:o[1]||(o[1]=e=>y.value=!1)},[h(j,null,{default:b(()=>[h(L)]),_:1})])])],512),[[T,l(y)]])],2)}}});export{Da as default};
