import{r as v,o as T,d as r,a as L,c as _,b as a,n as w,u as n,e as p,t as c,w as D,F as C,f as z,g as O,v as R,h as q,p as Q,i as H,j as P,k as G,l as j,E as J,m as d,q as N,s as K,x as W}from"./index-BEzX9u4E.js";function X(B,b="key",m="value"){return B.reduce((g,s)=>(g[s[b]]=s[m],g),{})}const Z={class:"main-body__wrapper"},ee={class:"main-body__header"},ae={class:"main-body__header-left"},te={class:"avatar"},oe={class:"desc"},se={class:"desc-name"},ne={class:"desc-date"},le={class:"main-body__header-right"},ce={class:"main-body__content"},de=["onClick"],re={class:"star-date"},ie={class:"main-body__summary"},ue=["loading"],ve={class:"star-desc__label"},_e={class:"star-desc__value"},me={key:1},ye={class:"main-body__desc"},he={class:"star-content__des"},fe={class:"star-content__value"},ke={class:"select-model"},pe={class:"select-model__body"},be=["onClick"],ge={class:"nav-item__title"},Ye={class:"nav-item__date"},Me={class:"select-model__footer"},we=q({name:"HomePage"}),Ce=Object.assign(we,{setup(B){const b=[{key:"today",value:"今日"},{key:"tomorrow",value:"明日"},{key:"week",value:"本周"},{key:"month",value:"本月"},{key:"year",value:"本年"},{key:"romance",value:"爱情"}],m=v("today"),g=l=>{switch(l){case"today":s.value=r().format("YYYY-MM-DD");break;case"tomorrow":s.value=r().add(1,"day").format("YYYY-MM-DD");break;case"week":{const t=r().startOf("week").format("YYYY-MM-DD"),o=r().endOf("week").format("YYYY-MM-DD");s.value=`${t}~${o}`}break;case"month":s.value=r().format("YYYY-MM");break;case"year":s.value=r().format("YYYY");break;case"romance":s.value=r().format("YYYY-MM-DD");break}m.value=l,F(),x()},s=v(""),$=v([{name:"综合运势",value:"",loading:!0},{name:"爱情运势",value:"",loading:!0},{name:"事业学业",value:"",loading:!0},{name:"财富运势",value:"",loading:!0},{name:"爱情运势",value:"",loading:!0},{name:"健康指数",value:"",loading:!0},{name:"幸运颜色",value:"",loading:!0},{name:"幸运数字",value:"",loading:!0},{name:"速配星座",value:"",loading:!0}]),U=[{astroid:"1",astroname:"白羊座",icon:"baiyangzuo",date:"3-21~4-19"},{astroid:"2",icon:"jinniuzuo",astroname:"金牛座",date:"4-20~5-20"},{astroid:"3",icon:"shuangzizuo",astroname:"双子座",date:"5-21~6-21"},{astroid:"4",icon:"juxiezuo",astroname:"巨蟹座",date:"6-22~7-22"},{astroid:"5",icon:"shizizuo",astroname:"狮子座",date:"7-23~8-22"},{astroid:"6",icon:"chunvzuo",astroname:"处女座",date:"8-23~9-22"},{astroid:"7",icon:"tianchengzuo",astroname:"天秤座",date:"9-23~10-23"},{astroid:"8",icon:"tianxiezuo",astroname:"天蝎座",date:"10-24~11-22"},{astroid:"9",icon:"sheshouzuo",astroname:"射手座",date:"11-23~12-21"},{astroid:"10",icon:"mojiezuo",astroname:"摩羯座",date:"12-22~1-19"},{astroid:"11",icon:"shuipingzuo",astroname:"水瓶座",date:"1-20~2-18"},{astroid:"12",icon:"shuangyuzuo",astroname:"双鱼座",date:"2-19~3-20"}],i=v(U[0]),y=v(!1),S=l=>{i.value=l,F(),x(),setTimeout(()=>{y.value=!1},300)},A=v([{key:"all",label:"综合指数",match:"综合指数",type:"star",value:0},{key:"work",label:"事业学业",match:"工作指数",type:"star",value:0},{key:"love",label:"爱情指数",match:"爱情指数",type:"star",value:0},{key:"money",label:"财富指数",match:"财运指数",type:"star",value:0},{key:"health",label:"健康指数",match:"健康指数",value:""},{key:"number",label:"幸运数字",match:"幸运数字",value:""},{key:"color",label:"幸运颜色",match:"幸运颜色",value:""},{key:"QFriend",label:"速配星座",match:"贵人星座",value:""}]),V=["#99A9BF","#F7BA2A","#FF9900"],h=v(!1),I=X(b),x=async()=>{h.value=!0,$.value.forEach(t=>{t.loading=!0});const l=I[m.value];Q("/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-tiny-8k?access_token=24.72e51227ded9c1e3b79f94bd99e02417.2592000.1731740058.282335-115902331",{messages:[{role:"user",content:`${i.value.astroname}${l}运势`}],temperature:.95,top_p:.7,penalty_score:1},{baseURL:H}).then(t=>{t!=null&&t.data&&$.value.forEach(o=>{o.type==="star"?o.value=Math.floor(t.data[o.key]/20):o.value=t.data[o.key],o.loading=!1})}).finally(()=>{h.value=!1})},F=async()=>{h.value=!0,P("/star/index",{astro:i.value.astroname,date:s.value,key:"33380ace36c9d4b3308e69b5802ffb3f"},{baseURL:G,"Content-Type":"application/x-www-form-urlencoded"}).then(l=>{var o,Y,f,M;if(!((Y=(o=l.res.data)==null?void 0:o.result)!=null&&Y.list))return;const t=(M=(f=l.res.data)==null?void 0:f.result)==null?void 0:M.list;A.value.forEach(u=>{const k=t.find(e=>e.type==u.match);if(k){if(u.type==="star"){const e=Number(k.content.replace("%",""));u.value=Math.floor(e/20)}else u.value=k.content;u.loading=!1}})}).finally(()=>{h.value=!1})};return T(()=>{s.value=r().format("YYYY-MM-DD"),F(),x()}),L(()=>{}),(l,t)=>{const o=j("MxIcon"),Y=j("Sort"),f=J,M=K,u=W,k=j("CircleClose");return d(),_("div",{id:"home",class:w(`${n(h)?"loading":""}`)},[a("div",Z,[a("div",{class:w(`main-body ${n(y)?"loading":""}`)},[a("div",ee,[a("div",ae,[a("div",te,[p(o,{name:n(i).icon},null,8,["name"])]),a("div",oe,[a("div",se,c(n(i).astroname),1),a("div",ne,c(n(i).date),1)])]),a("div",le,[a("div",{class:"change",onClick:t[0]||(t[0]=e=>y.value=!0)},[p(f,null,{default:D(()=>[p(Y)]),_:1})])])]),a("div",ce,[(d(),_(C,null,z(b,e=>a("div",{key:e.key,class:w(`forecast-btn ${n(m)===e.key?"active":""}`),onClick:E=>g(e.key)},c(e.value),11,de)),64)),a("div",re,[a("div",null,c(n(s)),1)])]),a("div",ie,[(d(!0),_(C,null,z(n(A),e=>(d(),_("div",{key:e.key,class:"star-desc",rows:5,loading:e.loading,animated:""},[a("div",ve,c(e.label),1),a("div",_e,[e.type==="star"?(d(),N(M,{key:0,modelValue:e.value,"onUpdate:modelValue":E=>e.value=E,colors:V,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(d(),_("div",me,c(e.value),1))])],8,ue))),128))]),a("div",ye,[(d(!0),_(C,null,z(n($),e=>(d(),N(u,{key:e.key,class:"star-content",rows:5,loading:e.loading,animated:""},{template:D(()=>t[2]||(t[2]=[])),default:D(()=>[a("div",he,c(e.key),1),a("div",fe,c(e.value),1)]),_:2},1032,["loading"]))),128))])],2)]),O(a("div",ke,[t[3]||(t[3]=a("div",{class:"select-model__header"},null,-1)),a("div",pe,[(d(),_(C,null,z(U,e=>a("div",{key:e.astroid,class:w(`nav-item ${n(i).astroid===e.astroid?"active":""}`),onClick:E=>S(e)},[a("div",ge,c(e.astroname),1),a("div",Ye,c(e.date),1)],10,be)),64))]),a("div",Me,[a("div",{class:"close",onClick:t[1]||(t[1]=e=>y.value=!1)},[p(f,null,{default:D(()=>[p(k)]),_:1})])])],512),[[R,n(y)]])],2)}}});export{Ce as default};
