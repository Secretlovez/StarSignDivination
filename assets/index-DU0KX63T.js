import{r as u,o as q,d as v,a as Q,c as l,b as a,n as F,u as n,e as h,t as c,w as Y,F as z,f as $,g as H,v as P,h as G,p as J,i as K,j as W,k as X,l as U,E as Z,m as o,q as B,s as ee,x as ae}from"./index-COdiPxHF.js";function se(S,x="key",g="value"){return S.reduce((_,V)=>(_[V[x]]=V[g],_),{})}const te={class:"main-body__wrapper"},oe={class:"main-body__header"},le={class:"main-body__header-left"},ne={class:"avatar"},ce={class:"desc"},de={class:"desc-name"},re={class:"desc-date"},ie={class:"main-body__header-right"},ue={class:"main-body__content"},ve=["onClick"],_e={class:"star-date"},me={class:"main-body__summary"},ye={class:"star-desc__label"},he={class:"star-desc__value"},fe={key:1},ke={key:0},pe={key:1},be={class:"star-desc__label"},ge={class:"star-desc__value"},Ye={key:1},De={key:0},Me={key:1},we={class:"main-body__middle"},Ce={class:"content"},ze={class:"main-body__desc"},$e={class:"star-content__des"},xe={class:"star-content__value"},Ve={class:"select-model"},Ee={class:"select-model__body"},Fe=["onClick"],Ue={class:"nav-item__title"},je={class:"nav-item__date"},Ae={class:"select-model__footer"},Be=G({name:"HomePage"}),Le=Object.assign(Be,{setup(S){const x=[{key:"today",value:"今日"},{key:"tomorrow",value:"明日"},{key:"week",value:"本周"},{key:"month",value:"本月"},{key:"year",value:"本年"}],g=u("today"),_=u(""),V=d=>{switch(d){case"today":r.value=v().format("YYYY-MM-DD"),_.value=r.value;break;case"tomorrow":r.value=v().add(1,"day").format("YYYY-MM-DD"),_.value=r.value;break;case"week":{const s=v().startOf("week").format("YYYY-MM-DD"),i=v().endOf("week").format("YYYY-MM-DD");_.value=i,r.value=`${s}~${i}`}break;case"month":r.value=v().format("YYYY-MM"),_.value=v().endOf("month").format("YYYY-MM-DD");break;case"year":r.value=v().format("YYYY"),_.value=v().endOf("year").format("YYYY-MM-DD");break;case"romance":r.value=v().format("YYYY");break}g.value=d,A(),j()},r=u(""),m=u([{name:"综合运势",match:"运势概括",value:"",loading:!0},{name:"爱情运势",match:"爱情方面",value:"",loading:!0},{name:"事业学业",match:"事业方面",value:"",loading:!0},{name:"财富运势",match:"财运方面",value:"",loading:!0},{name:"健康运势",match:"健康方面",value:"",loading:!0},{name:"人际关系",match:"感情方面",value:"",loading:!0}]),L=[{astroid:"1",astroname:"白羊座",icon:"baiyangzuo",date:"3-21~4-19"},{astroid:"2",icon:"jinniuzuo",astroname:"金牛座",date:"4-20~5-20"},{astroid:"3",icon:"shuangzizuo",astroname:"双子座",date:"5-21~6-21"},{astroid:"4",icon:"juxiezuo",astroname:"巨蟹座",date:"6-22~7-22"},{astroid:"5",icon:"shizizuo",astroname:"狮子座",date:"7-23~8-22"},{astroid:"6",icon:"chunvzuo",astroname:"处女座",date:"8-23~9-22"},{astroid:"7",icon:"tianchengzuo",astroname:"天秤座",date:"9-23~10-23"},{astroid:"8",icon:"tianxiezuo",astroname:"天蝎座",date:"10-24~11-22"},{astroid:"9",icon:"sheshouzuo",astroname:"射手座",date:"11-23~12-21"},{astroid:"10",icon:"mojiezuo",astroname:"摩羯座",date:"12-22~1-19"},{astroid:"11",icon:"shuipingzuo",astroname:"水瓶座",date:"1-20~2-18"},{astroid:"12",icon:"shuangyuzuo",astroname:"双鱼座",date:"2-19~3-20"}],k=u(L[0]),D=u(!1),O=d=>{k.value=d,A(),j(),setTimeout(()=>{D.value=!1},300)},E=u([{key:"all",label:"综合指数",match:"综合指数",type:"star",value:0},{key:"work",label:"事业学业",match:"工作指数",type:"star",value:0},{key:"love",label:"爱情指数",match:"爱情指数",type:"star",value:0},{key:"money",label:"财富指数",match:"财运指数",type:"star",value:0},{key:"health",label:"健康指数",match:"健康指数",value:""},{key:"number",label:"幸运数字",match:"幸运数字",value:""},{key:"color",label:"幸运颜色",match:"幸运颜色",value:""},{key:"QFriend",label:"速配星座",match:"贵人星座",value:""}]),I=u(""),N=["#99A9BF","#F7BA2A","#FF9900"],M=u(!1),T=se(x),j=async()=>{M.value=!0,m.value.forEach(s=>{s.loading=!0});const d=T[g.value];for(let s=0;s<m.value.length;s++)J("/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-tiny-8k?access_token=24.72e51227ded9c1e3b79f94bd99e02417.2592000.1731740058.282335-115902331",{messages:[{role:"user",content:`${k.value.astroname}${d}${m.value[s].name}`}],temperature:.95,top_p:.7,penalty_score:1},{baseURL:K}).then(i=>{var f,t;if(!((t=(f=i.res)==null?void 0:f.data)!=null&&t.result)){m.value[s].value="-",m.value[s].loading=!1;return}const y=i.res.data.result.split(`

`).slice(1,-1);m.value[s].value=y.reduce((p,b)=>p+b,""),m.value[s].loading=!1,m.value[s].show=!0}).finally(()=>{M.value=!1})},A=async()=>{M.value=!0,E.value.forEach(d=>{d.loading=!0}),W("/star/index",{astro:k.value.astroname,date:_.value||r.value,key:"33380ace36c9d4b3308e69b5802ffb3f"},{baseURL:X,"Content-Type":"application/x-www-form-urlencoded"}).then(d=>{var i,w,y,f;if(!((w=(i=d.res.data)==null?void 0:i.result)!=null&&w.list))return;const s=(f=(y=d.res.data)==null?void 0:y.result)==null?void 0:f.list;E.value.forEach(t=>{const p=s.find(b=>b.type==t.match);if(p){if(t.type==="star"){const b=Number(p.content.replace("%",""));t.value=Math.floor(b/20)}else t.value=p.content;t.loading=!1}}),E.value.forEach(t=>{t.loading&&(t.type==="star"?t.value=0:t.value="-",t.loading=!1)})}).finally(()=>{M.value=!1})},R=u([{key:"overall",label:"综合运势",match:"综合运势",type:"star",value:0},{key:"female",label:"女生指数",match:"女生指数",type:"star",value:0},{key:"male",label:"男生指数",match:"男生指数",type:"star",value:0}]);return q(()=>{r.value=v().format("YYYY-MM-DD"),A(),j()}),Q(()=>{}),(d,s)=>{const i=U("MxIcon"),w=U("Sort"),y=Z,f=ee,t=U("Loading"),p=ae,b=U("CircleClose");return o(),l("div",{id:"home",class:F(`${n(M)?"loading":""}`)},[a("div",te,[a("div",{class:F(`main-body ${n(D)?"loading":""}`)},[a("div",oe,[a("div",le,[a("div",ne,[h(i,{name:n(k).icon},null,8,["name"])]),a("div",ce,[a("div",de,c(n(k).astroname),1),a("div",re,c(n(k).date),1)])]),a("div",ie,[a("div",{class:"change",onClick:s[0]||(s[0]=e=>D.value=!0)},[h(y,null,{default:Y(()=>[h(w)]),_:1})])])]),a("div",ue,[(o(),l(z,null,$(x,e=>a("div",{key:e.key,class:F(`forecast-btn ${n(g)===e.key?"active":""}`),onClick:C=>V(e.key)},c(e.value),11,ve)),64)),a("div",_e,[a("div",null,c(n(r)),1)])]),a("div",me,[n(g)!=="romance"?(o(!0),l(z,{key:0},$(n(E),e=>(o(),l("div",{key:e.key,class:"star-desc"},[a("div",ye,c(e.label),1),a("div",he,[e.type==="star"?(o(),B(f,{key:0,modelValue:e.value,"onUpdate:modelValue":C=>e.value=C,colors:N,size:"small",disabled:""},null,8,["modelValue","onUpdate:modelValue"])):(o(),l("div",fe,[e.loading?(o(),l("span",pe,[h(y,{class:"is-loading"},{default:Y(()=>[h(t)]),_:1})])):(o(),l("span",ke,c(e.value),1))]))])]))),128)):(o(!0),l(z,{key:1},$(n(R),e=>(o(),l("div",{key:e.key,class:"star-desc"},[a("div",be,c(e.label),1),a("div",ge,[e.type==="star"?(o(),B(f,{key:0,modelValue:e.value,"onUpdate:modelValue":C=>e.value=C,colors:N,size:"small",disabled:""},null,8,["modelValue","onUpdate:modelValue"])):(o(),l("div",Ye,[e.loading?(o(),l("span",Me,[h(y,{class:"is-loading"},{default:Y(()=>[h(t)]),_:1})])):(o(),l("span",De,c(e.value),1))]))])]))),128))]),a("div",we,[a("div",Ce,c(n(I)),1)]),a("div",ze,[(o(!0),l(z,null,$(n(m),e=>(o(),B(p,{key:e.key,class:"star-content",rows:5,loading:e.loading,animated:""},{template:Y(()=>s[2]||(s[2]=[])),default:Y(()=>[a("div",$e,c(e.name),1),a("div",xe,c(e.value),1)]),_:2},1032,["loading"]))),128))])],2)]),H(a("div",Ve,[s[3]||(s[3]=a("div",{class:"select-model__header"},null,-1)),a("div",Ee,[(o(),l(z,null,$(L,e=>a("div",{key:e.astroid,class:F(`nav-item ${n(k).astroid===e.astroid?"active":""}`),onClick:C=>O(e)},[a("div",Ue,c(e.astroname),1),a("div",je,c(e.date),1)],10,Fe)),64))]),a("div",Ae,[a("div",{class:"close",onClick:s[1]||(s[1]=e=>D.value=!1)},[h(y,null,{default:Y(()=>[h(b)]),_:1})])])],512),[[P,n(D)]])],2)}}});export{Le as default};
