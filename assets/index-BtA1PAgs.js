import{r as v,o as O,d as i,a as R,c as _,b as a,n as g,u as l,e as h,t as d,w as b,F as Y,f as M,g as I,v as T,h as q,p as H,i as P,j as Q,k as G,l as $,E as J,m as c,q as A,s as K,x as W}from"./index-B0xjIrI9.js";function X(x,f="key",m="value"){return x.reduce((p,n)=>(p[n[f]]=n[m],p),{})}const Z={class:"main-body__wrapper"},aa={class:"main-body__header"},ea={class:"main-body__header-left"},oa={class:"avatar"},ta={class:"desc"},sa={class:"desc-name"},na={class:"desc-date"},la={class:"main-body__header-right"},da={class:"main-body__content"},ca=["onClick"],ra={class:"star-date"},ia={class:"main-body__summary"},ua=["loading"],va={class:"star-desc__label"},_a={class:"star-desc__value"},ma={key:1},ya={class:"main-body__desc"},ka={class:"star-content__des"},ha={class:"star-content__value"},fa={class:"select-model"},pa={class:"select-model__body"},ga=["onClick"],ba={class:"nav-item__title"},Ya={class:"nav-item__date"},Ma={class:"select-model__footer"},Da=q({name:"HomePage"}),Ca=Object.assign(Da,{setup(x){const f=[{key:"today",value:"今日"},{key:"tomorrow",value:"明日"},{key:"week",value:"本周"},{key:"month",value:"本月"},{key:"year",value:"本年"},{key:"romance",value:"爱情"}],m=v("today"),p=t=>{switch(t){case"today":n.value=i().format("YYYY-MM-DD");break;case"tomorrow":n.value=i().add(1,"day").format("YYYY-MM-DD");break;case"week":{const o=i().startOf("week").format("YYYY-MM-DD"),s=i().endOf("week").format("YYYY-MM-DD");n.value=`${o}~${s}`}break;case"month":n.value=i().format("YYYY-MM");break;case"year":n.value=i().format("YYYY");break;case"romance":n.value=i().format("YYYY-MM-DD");break}m.value=t,C(),w()},n=v(""),D=v([{name:"综合运势",value:"",loading:!0},{name:"爱情运势",value:"",loading:!0},{name:"事业学业",value:"",loading:!0},{name:"财富运势",value:"",loading:!0},{name:"爱情运势",value:"",loading:!0},{name:"健康指数",value:"",loading:!0},{name:"幸运颜色",value:"",loading:!0},{name:"幸运数字",value:"",loading:!0},{name:"速配星座",value:"",loading:!0}]),F=[{astroid:"1",astroname:"白羊座",icon:"baiyangzuo",date:"3-21~4-19"},{astroid:"2",icon:"jinniuzuo",astroname:"金牛座",date:"4-20~5-20"},{astroid:"3",icon:"shuangzizuo",astroname:"双子座",date:"5-21~6-21"},{astroid:"4",icon:"juxiezuo",astroname:"巨蟹座",date:"6-22~7-22"},{astroid:"5",icon:"shizizuo",astroname:"狮子座",date:"7-23~8-22"},{astroid:"6",icon:"chunvzuo",astroname:"处女座",date:"8-23~9-22"},{astroid:"7",icon:"tianchengzuo",astroname:"天秤座",date:"9-23~10-23"},{astroid:"8",icon:"tianxiezuo",astroname:"天蝎座",date:"10-24~11-22"},{astroid:"9",icon:"sheshouzuo",astroname:"射手座",date:"11-23~12-21"},{astroid:"10",icon:"mojiezuo",astroname:"摩羯座",date:"12-22~1-19"},{astroid:"11",icon:"shuipingzuo",astroname:"水瓶座",date:"1-20~2-18"},{astroid:"12",icon:"shuangyuzuo",astroname:"双鱼座",date:"2-19~3-20"}],u=v(F[0]),y=v(!1),B=t=>{u.value=t,C(),w(),setTimeout(()=>{y.value=!1},300)},E=v([{key:"all",label:"综合运势",type:"star",value:0},{key:"work",label:"事业学业",type:"star",value:0},{key:"love",label:"爱情运势",type:"star",value:0},{key:"money",label:"财富运势",type:"star",value:0},{key:"health",label:"健康指数",value:""},{key:"number",label:"幸运数字",value:""},{key:"color",label:"幸运颜色",value:""},{key:"QFriend",label:"速配星座",value:""}]),S=["#99A9BF","#F7BA2A","#FF9900"],k=v(!1),U=X(f),w=async()=>{k.value=!0,D.value.forEach(o=>{o.loading=!0});const t=U[m.value];H("/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-tiny-8k?access_token=24.72e51227ded9c1e3b79f94bd99e02417.2592000.1731740058.282335-115902331",{messages:[{role:"user",content:`${u.value.astroname}${t}运势`}],temperature:.95,top_p:.7,penalty_score:1},{baseURL:P}).then(o=>{o!=null&&o.data&&D.value.forEach(s=>{s.type==="star"?s.value=Math.floor(o.data[s.key]/20):s.value=o.data[s.key],s.loading=!1})}).finally(()=>{k.value=!1})},C=async()=>{k.value=!0,Q("/constellation/getAll",{consName:u.value.astroname,type:m.value,key:"c28ef3234057424111f5d2b93364806f"},{baseURL:G}).then(t=>{var s;if(console.log("res: ",t),!((s=t==null?void 0:t.res)!=null&&s.data))return;const o=t.res.data;console.log("res?.data: ",t==null?void 0:t.data),E.value.forEach(r=>{r.type==="star"?r.value=Math.floor(o[r.key]/20):r.value=o[r.key],r.loading=!1})}).finally(()=>{k.value=!1})};return O(()=>{C(),w(),n.value=i().format("YYYY-MM-DD")}),R(()=>{}),(t,o)=>{const s=$("MxIcon"),r=$("Sort"),j=J,N=K,V=W,L=$("CircleClose");return c(),_("div",{id:"home",class:g(`${l(k)?"loading":""}`)},[a("div",Z,[a("div",{class:g(`main-body ${l(y)?"loading":""}`)},[a("div",aa,[a("div",ea,[a("div",oa,[h(s,{name:l(u).icon},null,8,["name"])]),a("div",ta,[a("div",sa,d(l(u).astroname),1),a("div",na,d(l(u).date),1)])]),a("div",la,[a("div",{class:"change",onClick:o[0]||(o[0]=e=>y.value=!0)},[h(j,null,{default:b(()=>[h(r)]),_:1})])])]),a("div",da,[(c(),_(Y,null,M(f,e=>a("div",{key:e.key,class:g(`forecast-btn ${l(m)===e.key?"active":""}`),onClick:z=>p(e.key)},d(e.value),11,ca)),64)),a("div",ra,[a("div",null,d(l(n)),1)])]),a("div",ia,[(c(!0),_(Y,null,M(l(E),e=>(c(),_("div",{key:e.key,class:"star-desc",rows:5,loading:e.loading,animated:""},[a("div",va,d(e.label),1),a("div",_a,[e.type==="star"?(c(),A(N,{key:0,modelValue:e.value,"onUpdate:modelValue":z=>e.value=z,colors:S,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(c(),_("div",ma,d(e.value),1))])],8,ua))),128))]),a("div",ya,[(c(!0),_(Y,null,M(l(D),e=>(c(),A(V,{key:e.key,class:"star-content",rows:5,loading:e.loading,animated:""},{template:b(()=>o[2]||(o[2]=[])),default:b(()=>[a("div",ka,d(e.key),1),a("div",ha,d(e.value),1)]),_:2},1032,["loading"]))),128))])],2)]),I(a("div",fa,[o[3]||(o[3]=a("div",{class:"select-model__header"},null,-1)),a("div",pa,[(c(),_(Y,null,M(F,e=>a("div",{key:e.astroid,class:g(`nav-item ${l(u).astroid===e.astroid?"active":""}`),onClick:z=>B(e)},[a("div",ba,d(e.astroname),1),a("div",Ya,d(e.date),1)],10,ga)),64))]),a("div",Ma,[a("div",{class:"close",onClick:o[1]||(o[1]=e=>y.value=!1)},[h(j,null,{default:b(()=>[h(L)]),_:1})])])],512),[[T,l(y)]])],2)}}});export{Ca as default};
